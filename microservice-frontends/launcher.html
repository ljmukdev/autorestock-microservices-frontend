<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockPilot Microservice Frontend Launcher</title>
    <link rel="stylesheet" href="shared/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .launcher-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .launcher-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .launcher-header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .launcher-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .service-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        
        .service-card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .service-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .service-icon.purchases { background: linear-gradient(135deg, #667eea, #764ba2); }
        .service-icon.sales { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .service-icon.ebay { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .service-icon.vinted { background: linear-gradient(135deg, #43e97b, #38f9d7); }
        .service-icon.inventory { background: linear-gradient(135deg, #fa709a, #fee140); }
        .service-icon.media { background: linear-gradient(135deg, #a8edea, #fed6e3); }
        .service-icon.email { background: linear-gradient(135deg, #ff9a9e, #fecfef); }
        .service-icon.reporting { background: linear-gradient(135deg, #ffecd2, #fcb69f); }
        .service-icon.ad-generator { background: linear-gradient(135deg, #a18cd1, #fbc2eb); }
        .service-icon.auto-buying { background: linear-gradient(135deg, #fad0c4, #ffd1ff); }
        .service-icon.rules-engine { background: linear-gradient(135deg, #ff9a8b, #a8e6cf); }
        .service-icon.settings { background: linear-gradient(135deg, #84fab0, #8fd3f4); }
        .service-icon.status { background: linear-gradient(135deg, #d299c2, #fef9d7); }
        
        .service-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
        }
        
        .service-description {
            color: #718096;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .service-port {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4a5568;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .service-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-launch {
            flex: 1;
            padding: 10px 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-launch:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        
        .btn-status {
            padding: 10px 15px;
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-status:hover {
            background: #cbd5e0;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e0;
        }
        
        .status-indicator.online {
            background: #48bb78;
        }
        
        .status-indicator.offline {
            background: #f56565;
        }
        
        .quick-actions {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .quick-actions h3 {
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .quick-action {
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .quick-action:hover {
            background: #edf2f7;
            border-color: #667eea;
        }
        
        .quick-action i {
            font-size: 1.5rem;
            color: #667eea;
            margin-bottom: 8px;
            display: block;
        }
        
        .quick-action span {
            font-weight: 500;
            color: #4a5568;
        }
        
        @media (max-width: 768px) {
            .launcher-container {
                padding: 10px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .service-actions {
                flex-direction: column;
            }
            
            .quick-actions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="launcher-container">
        <div class="launcher-header">
            <h1><i class="fas fa-rocket"></i> StockPilot Microservice Frontends</h1>
            <p>Launch and test individual microservices with dedicated frontend interfaces</p>
        </div>

        <div class="services-grid">
            <!-- Purchases Service -->
            <div class="service-card" onclick="launchService('purchases-service')">
                <div class="service-card-header">
                    <div class="service-icon purchases">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div>
                        <div class="service-title">Purchases Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3001</span>
                            <div class="status-indicator" id="status-purchases"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Manages purchase data, supplier information, and purchase workflows with full CRUD operations.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('purchases-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('purchases-service', 3001)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Sales Service -->
            <div class="service-card" onclick="launchService('sales-service')">
                <div class="service-card-header">
                    <div class="service-icon sales">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div>
                        <div class="service-title">Sales Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3002</span>
                            <div class="status-indicator" id="status-sales"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Manages sales data, revenue tracking, and sales analytics with comprehensive reporting.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('sales-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('sales-service', 3002)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- eBay Service -->
            <div class="service-card" onclick="launchService('ebay-service')">
                <div class="service-card-header">
                    <div class="service-icon ebay">
                        <i class="fab fa-ebay"></i>
                    </div>
                    <div>
                        <div class="service-title">eBay Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3003</span>
                            <div class="status-indicator" id="status-ebay"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    OAuth authentication and data retrieval from eBay API including sales, purchases, and inventory.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('ebay-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('ebay-service', 3003)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Inventory Service -->
            <div class="service-card" onclick="launchService('inventory-service')">
                <div class="service-card-header">
                    <div class="service-icon inventory">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <div>
                        <div class="service-title">Inventory Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3004</span>
                            <div class="status-indicator" id="status-inventory"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Manages inventory items, stock levels, and product information with real-time updates.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('inventory-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('inventory-service', 3004)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Vinted Service -->
            <div class="service-card" onclick="launchService('vinted-service')">
                <div class="service-card-header">
                    <div class="service-icon vinted">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div>
                        <div class="service-title">Vinted Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3005</span>
                            <div class="status-indicator" id="status-vinted"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Web scraping and email parsing for Vinted transactions with financial analysis.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('vinted-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('vinted-service', 3005)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Media Service -->
            <div class="service-card" onclick="launchService('media-service')">
                <div class="service-card-header">
                    <div class="service-icon media">
                        <i class="fas fa-images"></i>
                    </div>
                    <div>
                        <div class="service-title">Media Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3006</span>
                            <div class="status-indicator" id="status-media"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Handles media uploads, storage, and management with thumbnail generation and sharing.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('media-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('media-service', 3006)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Email Service -->
            <div class="service-card" onclick="launchService('email-ingestion-service')">
                <div class="service-card-header">
                    <div class="service-icon email">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div>
                        <div class="service-title">Email Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3007</span>
                            <div class="status-indicator" id="status-email"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Email ingestion, parsing, and categorization with advanced filtering and tagging.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('email-ingestion-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('email-ingestion-service', 3007)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>

            <!-- Reporting Service -->
            <div class="service-card" onclick="launchService('reporting-service')">
                <div class="service-card-header">
                    <div class="service-icon reporting">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div>
                        <div class="service-title">Reporting Service</div>
                        <div class="service-port">
                            <i class="fas fa-plug"></i>
                            <span>Port: 3008</span>
                            <div class="status-indicator" id="status-reporting"></div>
                        </div>
                    </div>
                </div>
                <div class="service-description">
                    Generates reports, analytics, and trend analysis with comprehensive data visualization.
                </div>
                <div class="service-actions">
                    <button class="btn-launch" onclick="event.stopPropagation(); launchService('reporting-service')">
                        <i class="fas fa-external-link-alt"></i> Launch
                    </button>
                    <button class="btn-status" onclick="event.stopPropagation(); checkServiceStatus('reporting-service', 3008)">
                        <i class="fas fa-heartbeat"></i> Status
                    </button>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
            <div class="quick-actions-grid">
                <div class="quick-action" onclick="checkAllServices()">
                    <i class="fas fa-heartbeat"></i>
                    <span>Check All Services</span>
                </div>
                <div class="quick-action" onclick="openAllServices()">
                    <i class="fas fa-external-link-alt"></i>
                    <span>Open All Services</span>
                </div>
                <div class="quick-action" onclick="showServiceInfo()">
                    <i class="fas fa-info-circle"></i>
                    <span>Service Information</span>
                </div>
                <div class="quick-action" onclick="showDocumentation()">
                    <i class="fas fa-book"></i>
                    <span>Documentation</span>
                </div>
            </div>
        </div>
    </div>

    <script src="railway-config.js"></script>
    <script>
        // Service configurations from Railway
        const services = RailwayConfig.RAILWAY_SERVICES;

        /**
         * Launch a microservice frontend
         */
        function launchService(serviceName) {
            const serviceUrl = `${serviceName}/index.html`;
            window.open(serviceUrl, '_blank');
        }

        /**
         * Check service status
         */
        async function checkServiceStatus(serviceName, port) {
            const statusIndicator = document.getElementById(`status-${serviceName.split('-')[0]}`);
            const serviceConfig = services[serviceName];
            
            try {
                const response = await fetch(`${serviceConfig.url}/health`);
                if (response.ok) {
                    statusIndicator.className = 'status-indicator online';
                    alert(`${serviceConfig.name} is online and healthy!`);
                } else {
                    throw new Error('Service unhealthy');
                }
            } catch (error) {
                statusIndicator.className = 'status-indicator offline';
                alert(`${serviceConfig.name} is offline or unreachable.`);
            }
        }

        /**
         * Check all services status
         */
        async function checkAllServices() {
            const serviceNames = Object.keys(services);
            
            for (const serviceName of serviceNames) {
                const service = services[serviceName];
                const statusIndicator = document.getElementById(`status-${serviceName.split('-')[0]}`);
                
                try {
                    const response = await fetch(`${service.url}/health`);
                    if (response.ok) {
                        statusIndicator.className = 'status-indicator online';
                    } else {
                        statusIndicator.className = 'status-indicator offline';
                    }
                } catch (error) {
                    statusIndicator.className = 'status-indicator offline';
                }
                
                // Small delay between checks
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            alert('Service status check completed!');
        }

        /**
         * Open all services in new tabs
         */
        function openAllServices() {
            const serviceNames = Object.keys(services);
            
            serviceNames.forEach(serviceName => {
                setTimeout(() => {
                    launchService(serviceName);
                }, 500 * serviceNames.indexOf(serviceName));
            });
        }

        /**
         * Show service information
         */
        function showServiceInfo() {
            const info = Object.entries(services)
                .map(([key, service]) => `${service.name}: ${service.url}`)
                .join('\n');
            
            alert(`Railway Service URLs:\n\n${info}\n\nNote: These are your deployed Railway services. Make sure they are deployed and running.`);
        }

        /**
         * Show documentation
         */
        function showDocumentation() {
            alert(`StockPilot Microservice Frontends

This launcher provides individual frontend interfaces for each microservice, allowing you to:

• Test microservices independently
• Debug API endpoints
• Monitor service health
• View service logs
• Configure service settings

Each frontend includes:
- Overview dashboard
- Service-specific functionality
- API testing tools
- Real-time logs
- Configuration settings

To get started:
1. Ensure microservices are running
2. Click "Status" to check if a service is online
3. Click "Launch" to open the service frontend
4. Use the API testing tools to verify endpoints

For more information, check the README files in each microservice directory.`);
        }

        // Check all services on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkAllServices, 1000);
        });
    </script>
</body>
</html>
